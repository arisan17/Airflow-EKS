# Default values for gpu-operator.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

daemonsets:
  labels: {}
  annotations: {}
  priorityClassName: system-node-critical
  tolerations:
    - key: nvidia.com/gpu
      operator: Exists
      effect: NoSchedule
    - operator: "Exists" # Added this to ensure it can tolerate any custom Taints added to the GPU nodes

validator:
  repository: nvcr.io/nvidia/cloud-native
  image: gpu-operator-validator

operator:
  repository: nvcr.io/nvidia
  priorityClassName: system-node-critical
  defaultRuntime: containerd
  image: gpu-operator
  cleanupCRD: false # This option doesn't do anything even if you change this to true. NVIDIA recommends to use the manual approach of upgrading the CRDs
  upgradeCRD: false
  resources:
    limits:
      cpu: 500m
      memory: 350Mi
    requests:
      cpu: 200m
      memory: 100Mi

mig:
  strategy: single

toolkit:
  enabled: true

devicePlugin:
  enabled: true

dcgm:
  enabled: false

dcgmExporter:
  enabled: true

gfd:
  enabled: true

migManager:
  enabled: true

nodeStatusExporter:
  enabled: false

gds:
  enabled: false

vgpuManager:
  enabled: false

vgpuDeviceManager:
  enabled: true

vfioManager:
  enabled: true

sandboxDevicePlugin:
  enabled: true

node-feature-discovery:
  enableNodeFeatureApi: true
  worker:
    tolerations:
      - key: "node-role.kubernetes.io/master"
        operator: "Equal"
        value: ""
        effect: "NoSchedule"
      - key: nvidia.com/gpu
        operator: Exists
        effect: NoSchedule
      - operator: "Exists" # Added this to ensure it can tolerate any custom Taints added to the GPU nodes
